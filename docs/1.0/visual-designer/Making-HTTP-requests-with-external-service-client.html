<!DOCTYPE html>
<html lang="en" class="enterprise-persona">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- In order to avoid flashing of wrong brand we keep the title empty at first and then fill it dynamically -->
    <title data-custom-title="Accessing HTTP resources with External Service element - Restcomm Docs"></title>
    <link rel="canonical" href="
      https://cloud.restcomm.com/docs/1.0/visual-designer/Making-HTTP-requests-with-external-service-client.html
    ">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" type="image/png" href=""/>
    <link rel="stylesheet" href="../../../_/css/site.css" title="antora-stylesheet">
    <!-- Right now for demo purposes I'm using google icons, but once we finalize design might be different -->
    <!-- Not using it for now
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      </head>
  <body class="article" style="display: none">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: we could simplify to this after reverse proxy changes are rolled out, but we need to make sure that
           it won't break if we change playbook configuration
      <a class="navbar-item header-logo-link" href="/docs">
      -->
      <a class="navbar-item header-logo-link" href="/docs/">
      </a>
    </div>
  </nav>
  <!-- TODO: need to improve the variable used to decide displaying this nav -->
  <nav class="navbar-enterprise">
    <div class="navbar-enterprise-button-container">
      <button class="navigation-toggle icon-custom-font-right" style="visibility: hidden;">
      </button>
      <!--
      <span class="icon-custom-font-x"><span class="icon-custom-font-back-hamburger"><span class="icon-custom-font-left"><span class="icon-custom-font-right">
      -->
      <button class="navbar-enterprise-burger icon-custom-font-back-hamburger">
      </button>
    </div>
    <div class="navbar-enterprise-container">



        <a class="navbar-enterprise-item" href="/docs/api/overview.html">Reference</a>
        <a class="navbar-enterprise-item" href="/docs/solutions/index.html">Solutions</a>
        <a class="navbar-enterprise-item" href="/docs/tutorials/index.html">Tutorials</a>
        <a class="navbar-enterprise-item" href="/docs/visual-designer/index.html">Visual Designer</a>


    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="docs" data-version="1.0"  style="display: none;">
  <aside class="navigation">
    <div class="panels">
  <div class="navigation-menu is-active" data-panel="menu">
    <nav class="nav-menu">
      <!-- Not applicable to our Enterprise docs
    <h3 class="title"><a href="../index.html">docs</a></h3>
    -->
        <ul class="nav-list">
  </ul>
    </nav>
  </div>
<div class="navigation-explore" data-panel="explore" style="display: none;">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<!--

-->
<div class="toolbar" role="navigation" style="display: none;">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">docs</a></li>
    <li class="crumb"><a href="Making-HTTP-requests-with-external-service-client.html">Accessing HTTP resources with External Service element</a></li>
  </ul>
</nav>
</div>
<article class="doc fix-anchor-links-position">
  <h1>Accessing HTTP resources with External Service element</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="sps-text non-sps-link" data-orig-text="Restcomm" data-parm-text="application_name" data-default-text="$INFER_FROM_DOMAIN">Restcomm</span> Visual Designer’s External Service element is a tool for making HTTP requests to external services and processessing their responses. This document focuses on the former. It explains its capabilities and describes how it can be used from Visual Designer’s UI. Currently ES client supports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GET or POST request methods</p>
</li>
<li>
<p>JSON or web form content types</p>
</li>
<li>
<p>HTTP or HTTPS schemes</p>
</li>
<li>
<p>basic HTTP authentication</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_simple_get_request"><a class="anchor" href="#_a_simple_get_request"></a>A Simple GET request</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a simple GET request with parameters:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_069.png" alt="Selection_069">
</div>
</div>
<div class="paragraph">
<p>By default, all requests use GET method. Note that name-value parameter is user defined. Such parameters are appended in the query when the request is made. It’s a good practice to keep parameters in their own fields and avoid putting them directly in the Service Url field. Here is what the actual data on the wire:</p>
</div>
<div class="paragraph">
<p><strong>Request</strong></p>
</div>
<div class="paragraph">
<p>GET /services/simpleGetRequest.php?name=foo HTTP/1.1</p>
</div>
<div class="paragraph">
<p>Host: localhost</p>
</div>
<div class="paragraph">
<p><strong>Response</strong></p>
</div>
<div class="paragraph">
<p>HTTP/1.1 200 OK</p>
</div>
<div class="sect2">
<h3 id="_a_note_on_em_variable_expansion_em"><a class="anchor" href="#_a_note_on_em_variable_expansion_em"></a>A note on <em>Variable expansion</em></h3>
<div class="paragraph">
<p>Both Service Url and Value fields support <em>variable expansion</em>. That means that all $variables and references in them will be replaced by their actual value before the request is being made.</p>
</div>
<div class="paragraph">
<p><strong>For example:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_071.png" alt="Selection_071">
</div>
</div>
<div class="paragraph">
<p>Here $firstname variable will be expanded to its actual content.</p>
</div>
<div class="paragraph">
<p>$firstname → name</p>
</div>
</div>
<div class="sect2">
<h3 id="_posting_web_forms"><a class="anchor" href="#_posting_web_forms"></a>POSTing web forms</h3>
<div class="paragraph">
<p>Here is a simple POST request:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_073.png" alt="post request">
</div>
</div>
<div class="paragraph">
<p>In order to access the advances features of the ES client you will need to click on the <em>gear</em> icon. Also notice the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can switch the HTTP method used by using the Method drop down menu. Default is GET.</p>
</li>
<li>
<p>Either www form or json content types are supported. For common url-encoded request use www form.</p>
</li>
<li>
<p>Manually building the body of the request with ‘&amp;’ and ‘=’ can often be a daunting and error-prone task. Check Automatically populate from service parameters to let Visual Designer build the request body from the Name/Value pairs you have defined.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let’s see it in action:</p>
</div>
<div class="paragraph">
<p><strong>Request</strong></p>
</div>
<div class="paragraph">
<p>POST /services/simplePostRequest.php HTTP/1.1</p>
</div>
<div class="paragraph">
<p>Content-Length: 21</p>
</div>
<div class="paragraph">
<p>Content-Type: application/x-www-form-urlencoded</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>name=foo&amp;lastname=bar</p>
</div>
<div class="paragraph">
<p><strong>Response</strong></p>
</div>
<div class="paragraph">
<p>HTTP/1.1 200 OK</p>
</div>
<div class="sect3">
<h4 id="_provide_post_body_manually"><a class="anchor" href="#_provide_post_body_manually"></a>Provide POST body manually</h4>
<div class="paragraph">
<p>You can also provide the POST body manually if you want. For example:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_074.png" alt="provide POST body manually">
</div>
</div>
<div class="paragraph">
<p>Notice how we have removed the service parameters and provided the url-encoded body instead. In case the service parameters were still there, they would be ignored.</p>
</div>
</div>
<div class="sect3">
<h4 id="_posting_json"><a class="anchor" href="#_posting_json"></a>POSTing json</h4>
<div class="paragraph">
<p>Using a JSON request body is not much different:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_075.png" alt="Selection_075">
</div>
</div>
<div class="paragraph">
<p>POSTing JSON can only be done by manually providing the JSON expression. You will just need to set the <em>Content type</em> to json and type the JSON expression.</p>
</div>
<div class="paragraph">
<p>Here is an example of JSON expression:</p>
</div>
<div class="paragraph">
<p>{"name":<strong>"$firstname"</strong>,"lastname":"bar"}</p>
</div>
<div class="paragraph">
<p>Note that double quotes are being used in the JSON expression. Visual Designer does not know about the json syntax and its types. It will just go for a search‘n’replace. You will need to make sure that a valid json expression will result at the end.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_basic_http_authentication"><a class="anchor" href="#_using_basic_http_authentication"></a>Using basic HTTP authentication</h4>
<div class="paragraph">
<p>For services that are protected with basic http authentication the user credentials need also to be provided:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_076.png" alt="Selection_076">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_handling_service_http_errors"><a class="anchor" href="#_handling_service_http_errors"></a>Handling service HTTP errors</h4>
<div class="paragraph">
<p>In case the external service fails with an HTTP error code a handler can be used. In order to set up the handler you will need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a handler Visual Designer module</p>
</li>
<li>
<p>bind the ES component to this handler using ‘On Remote Error’ drop down menu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Here is a sample handler module labeled ‘Error announcement’:</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_077.png" alt="Selection_077">
</div>
</div>
<div class="paragraph">
<p>You can find the ‘On Remote Error’ drop down menu at the bottom of the ES component. Here is how it should look like after binding it to the handler module:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Selection_078.png" alt="Selection_078">
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column-container">
      <div class="footer-column">
        <h5 class="footer-column-title">Products</h5>
          <p><a class="footer-products-item" href="/docs/api/voice-category.html">Programmable Voice</a></p>
          <p><a class="footer-products-item" href="/docs/api/sms-category.html">Programmable SMS</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Use Cases</h5>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Two-factor-Authentication-2FA.html">Two-Factor Authentication (2FA)</a></p>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Phone-number-masking.html">Phone Number Masking</a></p>
        <p><a class="footer-usecase-item" href="/docs/tutorials/Create-a-Voicemail-to-Email-app-with-zero-coding.html">Voicemail to Email Application</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Learn</h5>

          <p><a id="terms-link" class="non-sps-text sps-link" data-parm-link="terms_link" href="/docs/terms.html" data-default-link="/docs/terms.html">Terms And Conditions</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Contact us</h5>
        <p><a class="sps-text sps-link" data-parm-text="company_name" data-parm-link="company_link" href="https://www.telestax.com/" data-default-text="Company Name" data-default-link="#">Telestax</a></p>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<!--
<script>hljs.initHighlighting()</script>
-->
<!--
  Tried to get this chunk into js/05-countly.js but it has some issues with the async loading so fell back to putting it here
  where it works for some reason
-->
  <!-- Only enable countly if the key is set -->
  <script type='text/javascript' src='https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'></script>
  <script>
    var Countly = Countly || {}
    Countly.q = Countly.q || []

    // provide countly initialization parameters
    Countly.app_key = '078fe985e67633be9b5569e0de287850d9194ca7'
    Countly.url = 'https://restcomm.count.ly'

    Countly.q.push(['track_sessions'])
    Countly.q.push(['track_pageview'])
    Countly.q.push(['track_clicks'])
    Countly.q.push(['track_errors'])
    Countly.q.push(['track_links'])
    Countly.q.push(['track_forms'])
    Countly.q.push(['collect_from_forms'])

    // send event
    Countly.q.push(['add_event', {
      key: 'Restcomm CSPs Documentation',
      segmentation: {},
    }]);

    // load countly script asynchronously
    (function () {
      var cly = document.createElement('script')
      cly.type = 'text/javascript'
      cly.async = true
      // enter url of script here
      cly.src = 'https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'
      cly.onload = function () {
        Countly.init()
      }
      var s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(cly, s)
    })()
  </script>
<!-- UserBack Tool -->
<script>
    Userback = window.Userback || {};
    Userback.access_token = '5061|10149|r9Ure7pw7zJFVyflkflhPEQJvrsbdWcpYS5Vz3safDjZZg7ukX';
    (function(id) {
        var s = document.createElement('script');
        s.async = 1;s.src = 'https://static.userback.io/widget/v1.js';
        var parent_node = document.head || document.body;parent_node.appendChild(s);
    })('userback-sdk');
</script>

  </body>
</html>
