<!DOCTYPE html>
<html lang="en" class="csp-persona">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- In order to avoid flashing of wrong brand we keep the title empty at first and then fill it dynamically -->
    <title data-custom-title="Smart 2FA - Restcomm Docs"></title>
    <link rel="canonical" href="
      https://dev.restcomm.com/docs/1.0/turnkey-applications/smart-2fa.html
    ">
    <meta name="description" content="Secure online transactions, account sign-ins, mobile apps, websites and more by providing smart 2FA with One-Time Passwords to your users.">
    <meta name="keywords" content="2fa, two-factor authentication, secure online transactions, otp, one-time passwords, #{&quot;spsParm&quot;:&quot;application_name&quot;,&quot;rcText&quot;:&quot;Restcomm&quot;,&quot;defaultText&quot;:&quot;$INFER_FROM_DOMAIN&quot;} two-factor authentication">
    <meta name="generator" content="Antora 1.1.1">
    <link rel="icon" type="image/png" href="../../../_/img/favicon.png"/>
    <link rel="stylesheet" href="../../../_/css/site.css" title="antora-stylesheet">
    <!-- Right now for demo purposes I'm using google icons, but once we finalize design might be different -->
    <!-- Not using it for now
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet">
    -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
      </head>
  <body class="article" >
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!-- TODO: we could simplify to this after reverse proxy changes are rolled out, but we need to make sure that
           it won't break if we change playbook configuration
      <a class="navbar-item header-logo-link" href="/docs">
      -->
      <a class="navbar-item header-logo-link" href="/docs/">
      </a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <!-- TODO: Bring back when we integrate with searching facilities
        <a class="navbar-item" href="#"><i class="material-icons">search</i></a>
        -->
        <a class="navbar-item" href="https://cloud.restcomm.com/#/login">Sign in</a>
        <div class="navbar-item">
          <span>
            <a id="signup" class="button" href="https://cloud.restcomm.com/#/signup">Sign up</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
  <!-- TODO: need to improve the variable used to decide displaying this nav -->
  <nav class="navbar-enterprise">
    <div class="navbar-enterprise-button-container">
      <button class="navigation-toggle icon-custom-font-right">
      </button>
      <!--
      <span class="icon-custom-font-x"><span class="icon-custom-font-back-hamburger"><span class="icon-custom-font-left"><span class="icon-custom-font-right">
      -->
      <button class="navbar-enterprise-burger icon-custom-font-back-hamburger">
      </button>
    </div>
    <div class="navbar-enterprise-container">



        <a class="navbar-enterprise-item" id="Reference" href="/docs/1.0/api/overview.html">Reference</a>
        <a class="navbar-enterprise-item" id="TurnkeyApplications" href="/docs/1.0/visual-designer/index.html">Visual Designer</a>
        <a class="navbar-enterprise-item" id="Tutorials" href="/docs/1.0/tutorials/index.html">Tutorials</a>


    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="docs" data-version="1.0" >
  <aside class="navigation">
    <div class="panels">
  <div class="navigation-menu is-active" data-panel="menu">
    <nav class="nav-menu">
      <!-- Not applicable to our Enterprise docs
    <h3 class="title"><a href="../index.html">docs</a></h3>
    -->
        <ul class="nav-list">
          <ul class="nav-list">
  </ul>
          <ul class="nav-list">
              <ul class="nav-list">
                                                                          </ul>
              <ul class="nav-list">
              <ul class="nav-list">
                                                              </ul>
              <ul class="nav-list">
                                                              </ul>
              <ul class="nav-list">
                                                                                                                                                  </ul>
                          <ul class="nav-list">
                                                  </ul>
              <ul class="nav-list">
                                                                                                              </ul>
                                      </ul>
              <ul class="nav-list">
              <ul class="nav-list">
                                                                          </ul>
                          <ul class="nav-list">
                          </ul>
              <ul class="nav-list">
              </ul>
                          <ul class="nav-list">
                                      </ul>
              </ul>
              <ul class="nav-list">
                          <ul class="nav-list">
                                                  </ul>
              </ul>
              <ul class="nav-list">
              <ul class="nav-list">
                                                  </ul>
              <ul class="nav-list">
                                                                                      </ul>
              <ul class="nav-list">
                                                              </ul>
              <ul class="nav-list">
                                                  </ul>
              <ul class="nav-list">
                                      </ul>
              <ul class="nav-list">
                                                                                                  </ul>
                          <ul class="nav-list">
                                                                                                              </ul>
              <ul class="nav-list">
              <ul class="nav-list">
                                                                          </ul>
              <ul class="nav-list">
                                                  </ul>
                                                  <ul class="nav-list">
                          </ul>
              <ul class="nav-list">
                                      </ul>
  </ul>
  </ul>
              <ul class="nav-list">
              <ul class="nav-list">
                          </ul>
              <ul class="nav-list">
                                                  </ul>
                                      <ul class="nav-list">
              </ul>
                                                                                                  </ul>
              <ul class="nav-list">
              </ul>
  </ul>
  </ul>
    </nav>
  </div>
<div class="navigation-explore" data-panel="explore" style="display: none;">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">1.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<!--

-->
<div class="toolbar" role="navigation" style="display: none;">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">docs</a></li>
    <li class="crumb"><a href="smart-2fa.html">CSP:Turnkey Apps APIs</a></li>
  </ul>
</nav>
</div>
<article class="doc fix-anchor-links-position">
  <h1>Smart 2FA</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Smart 2FA API lets you to send One Time Passowrd (OTP) using SMS, Voice or email.</p>
</div>
<div class="paragraph">
<p>2FA allows you to add a second layer of security to your Application in addition to the user-id and password. The flexibility of using any channel makes sure your users get OTP even when they experience issue with one of the channels.</p>
</div>
<div class="paragraph">
<p><strong>User enters your application</strong></p>
</div>
<div class="paragraph">
<p>User visits your website or mobile app and attempts to log into his account, authorize a transaction, or perform another action that requires two-factor authentication from a new device.</p>
</div>
<div class="paragraph">
<p><strong>User is prompted to enter his phone number</strong></p>
</div>
<div class="paragraph">
<p>Restcomm receives the login attempt and prompts the user to enter his phone number in order to authorize the new device.</p>
</div>
<div class="paragraph">
<p><strong>PIN code is sent to the user via SMS, phone call or email depending on API called</strong></p>
</div>
<div class="paragraph">
<p>Once the user enters a valid phone number, from your application you will need to ask Restcomm to send a verification code to that phone number by using the HTTP REST API Call Below.</p>
</div>
<div class="paragraph">
<p><strong>Categories</strong></p>
</div>
<div class="paragraph">
<p>2FA can be broadly classified into four categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Send</strong><br></p>
</li>
<li>
<p><strong>Verify</strong><br></p>
</li>
<li>
<p><strong>Control</strong><br></p>
</li>
<li>
<p><strong>Session Detail Record</strong><br></p>
</li>
<li>
<p><strong>Limit</strong></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_send"><a class="anchor" href="#_send"></a>Send</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sending a verification code requires basic authorization that includes your account SID and auth token. Below is the format you have to use in order to send a verification code to the user&#8217;s phone number.</p>
</div>
<div class="paragraph">
<p>For more information about the API reference visit <a href="../enterprise/tutorials/Smart-2FA.html#_send">here</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify"><a class="anchor" href="#_verify"></a>Verify</h2>
<div class="sectionbody">
<div class="paragraph">
<p>User receives the one-time PIN code via SMS, phone call or email, gets back to your application and enters it in order to complete the verification process. Verifying the code is simple and requires basic authorization that includes your account SID and auth token.</p>
</div>
<div class="paragraph">
<p>For more information about the API reference please visit <a href="../enterprise/tutorials/Smart-2FA.html#_verify">here</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_control"><a class="anchor" href="#_control"></a>Control</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../enterprise/tutorials/Smart-2FA.html#_control">Control API</a> allows application developers to <strong>cancel</strong> already sent OTP.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_session_detail_record_sdr"><a class="anchor" href="#_session_detail_record_sdr"></a>Session Detail Record (SDR)</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../enterprise/tutorials/Smart-2FA.html#_session_detail_record_sdr">Session Detail Record API</a> allows retrieving a specific OTP session or list of sessions along with their corresponding details. For example, which channel was used to send OTP to the end user, or what error occurred when the OTP delivery failed. The API also supports filtering based on certain criterias.</p>
</div>
<div class="sect2">
<h3 id="_usage_reports"><a class="anchor" href="#_usage_reports"></a>Usage Reports</h3>
<div class="paragraph">
<p>In addition you can retrieve information about the usage of 2FA during specific period of time by passing additional filter criterias.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage_record_one_time_passwords_api_reference"><a class="anchor" href="#_usage_record_one_time_passwords_api_reference"></a>Usage Record One-Time Passwords - API Reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Usage Record REST resource provides a simple API to retrieve usage generated by your 2FA account during any period of time and by any usage channel. This makes it easy to build reporting and analytics tools for your application.</p>
</div>
<div class="sect2">
<h3 id="_base_resource_uri"><a class="anchor" href="#_base_resource_uri"></a>Base Resource URI</h3>
<div class="paragraph">
<p><a href="https://your_custom_domain.com" class="bare">https://your_custom_domain.com</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_verification_code_resource_uri"><a class="anchor" href="#_verification_code_resource_uri"></a>Verification Code Resource URI</h3>
<div class="paragraph">
<p>/2fa/usage/records</p>
</div>
</div>
<div class="sect2">
<h3 id="_supported_operations"><a class="anchor" href="#_supported_operations"></a>Supported Operations</h3>
<div class="paragraph">
<p>HTTP Method: Supports both GET and POST: Return usage record.</p>
</div>
</div>
<div class="sect2">
<h3 id="_filtering"><a class="anchor" href="#_filtering"></a>Filtering</h3>
<div class="paragraph">
<p>Usage filter will return usage records corresponding to the filter passed. The following filtering parameters are supported.</p>
</div>
<table class="tableblock frame-top grid-rows spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Query Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">channel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage Records that are initiated via this channel. Possible values are:<br>
- call<br>
- SMS<br>
- email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">to</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage Records that begin with this number/email text.<br></p>
<p class="tableblock">For example if the OTP <code>to</code> is “16513333367“ and the <code>to</code> filter parameter is “1“, it will match that record. However if the <code>to</code> filter parameter is “3“, this record will not be matched.<br></p>
<p class="tableblock">This allows filtering Usage Records sent to a specific country code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage records that has this status. Possible values are:<br>
* success<br>
* canceled<br>
* expired<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage Records for OTPs that were created on this date/time or later, given as an ISO-8601 date/time string YYYY-MM-DDTHH:MM:SS. For example: <code>2018-10-05T22:45:32</code>. If you want to omit the time you can use: YYYY-MM-DD. For example: <code>2018-10-05</code>. When only a date is provided the time is assumed to be at midnight of the given date. Note that the given date/time is inclusive and is assumed to be in the UTC timezone.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage Records for OTPs that were created on this date/time or earlier, given as an ISO-8601 date/time string YYYY-MM-DDTHH:MM:SS. For example: <code>2018-10-06T02:10:03</code>. If you want to omit the time you can use: YYYY-MM-DD. For example: <code>2018-10-06</code>. When only a date is provided the time is assumed to be at midnight of the given date. Note that the given date/time is inclusive and is assumed to be in the UTC timezone.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountSid</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only include Usage Record that are generated by this specific accountSid. The accountSid should belong to one the sub account&#8217;s under this account.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_example_of_call_usage"><a class="anchor" href="#_example_of_call_usage"></a>Example of Call Usage</h4>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X GET \ https://yourdomain.com/2fa/usage/records?channel=call&amp;startDate=2019-07-01&amp;endDate=2020-07-23
 \
--user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \</pre>
</div>
</div>
<div class="paragraph">
<p>Below is the response returned:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "usageRecords": [
        {
            "description": "2FA Usage record",
            "count": 16,
            "successful": 7,
            "unsuccessful": 9,
            "unit": "2FA",
            "uri": "/2fa/usage/records?channel=call&amp;endDate=2020-07-23&amp;startDate=2019-07-01"
        }
    ]
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_sms_usage"><a class="anchor" href="#_example_sms_usage"></a>Example - SMS Usage</h3>
<script>
      function openLanguage(language, index) {
        const sampleClasses = document.getElementsByClassName("sample-language-" + index);
        for (const sampleClass of sampleClasses) {
          sampleClass.style.display = "none";
        }
        document.getElementById(language + '-' + index).style.display = "block";

        // first, disable the previously selected tab title
        const previouslyActive = document.getElementsByClassName('scsIndex-' + index + ' is-active')
        if (previouslyActive.length > 0) {
          previouslyActive[0].classList.toggle('is-active')
        }

        // then, enable the newly selected title
        event.target.classList.toggle('is-active')
      }
      </script>
      <div class="sample-code-bar">
        <button class="sample-code-button scsIndex-78 is-active" onclick="openLanguage('Curl', 78)">Curl</button>
        <button class="sample-code-button scsIndex-78" onclick="openLanguage('Nodejs', 78)">Nodejs</button>
        <button class="sample-code-button scsIndex-78" onclick="openLanguage('Python', 78)">Python</button>
        <button class="sample-code-button scsIndex-78" onclick="openLanguage('Java', 78)">Java</button>
      </div>
      <div id="Curl-78" class="sample-language-78">
        <pre class="highlightjs highlight"><code class="language-console hljs samplecode-container" data-lang="console">curl -X GET https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records.json?channel=sms&startDate=2019-07-01&endDate=2020-07-23  \
   -u 'YourAccountSid:YourAuthToken'
</code></pre>
      </div>
      <div id="Nodejs-78" class="sample-language-78" style="display:none">
        <pre class="highlightjs highlight"><code class="language-javascript hljs samplecode-container" data-lang="javascript">const request = require('request');

// Provide your Account Sid and Auth Token from your Console Account page
const ACCOUNT_SID = 'my_ACCOUNT_SID';
const AUTH_TOKEN = 'my_AUTH_TOKEN';

request({
      method: 'GET',
      url: 'https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records.json?channel=sms&startDate=2019-07-01&endDate=2020-07-23',
      auth: { 'user': ACCOUNT_SID, 'pass': AUTH_TOKEN }
   },
   function (error, response, body) {
      // Add your business logic below; status can be found at 'response.statusCode' and response body at 'body'
      ...
   }
);
</code></pre>
      </div>
      <div id="Python-78" class="sample-language-78" style="display:none">
        <pre class="highlightjs highlight"><code class="language-python hljs samplecode-container" data-lang="python">from http.client import HTTPSConnection
from base64 import b64encode

# Provide your Account Sid and Auth Token from your Console Account page
ACCOUNT_SID = 'my_ACCOUNT_SID'
AUTH_TOKEN = 'my_AUTH_TOKEN'

userAndPass = b64encode(bytes(ACCOUNT_SID + ':' + AUTH_TOKEN, 'utf-8')).decode("ascii")
headers = { 'Authorization' : 'Basic %s' %  userAndPass }

conn = HTTPSConnection('mycompany.restcomm.com')
conn.request("GET", '/restcomm/2012-04-24/2fa/usage/records.json?channel=sms&startDate=2019-07-01&endDate=2020-07-23',
      headers=headers)
res = conn.getresponse()

# Add your business logic below; status can be found at 'res.status', reason at 'res.reason' and response body can be retrieved with res.read()
...
</code></pre>
      </div>
      <div id="Java-78" class="sample-language-78" style="display:none">
        <pre class="highlightjs highlight"><code class="language-java hljs samplecode-container" data-lang="java">import java.net.URL;
import javax.net.ssl.HttpsURLConnection;
import java.io.*;
import java.util.Base64;

public class JavaSampleClass {
   // Provide your Account Sid and Auth Token from your Console Account page
   public static final String ACCOUNT_SID = "my_ACCOUNT_SID";
   public static final String AUTH_TOKEN = "my_AUTH_TOKEN";


   public static void main(String[] args) throws Exception {
      String userAndPass = ACCOUNT_SID + ':' + AUTH_TOKEN;
      String encoded = Base64.getEncoder().encodeToString(userAndPass.getBytes());

      URL url = new URL("https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records.json?channel=sms&startDate=2019-07-01&endDate=2020-07-23");
      HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();
      conn.setRequestProperty("Authorization", "Basic " + encoded);
      conn.setRequestMethod("GET");

      // Add your business logic below; response code can be obtained from 'conn.getResponseCode()' and input stream from 'conn.getInputStream()'
      ...
  }
}
</code></pre>
      </div>
<div class="paragraph">
<p>Below is the response returned:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "usageRecords": [
        {
            "description": "2FA Usage record",
            "count": 18,
            "successful": 1,
            "unsuccessful": 17,
            "unit": "2FA",
            "uri": "/2fa/usage/records?channel=sms&amp;endDate=2020-07-23&amp;startDate=2019-07-01"
        }
    ]
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_of_otp_usage"><a class="anchor" href="#_example_of_otp_usage"></a>Example of OTP Usage</h3>
<div class="paragraph">
<p>From the bash terminal you can run the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -X GET \ https://yourdomain.com/2fa/usage/records?startDate=2019-07-01&amp;endDate=2020-07-23
 \
--user  ' {your_account_SID}:{your_account_token}' \
  -H 'Cache-Control: no-cache' \
  -H 'Content-Type: application/json' \</pre>
</div>
</div>
<div class="paragraph">
<p>Below is the response returned:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "usageRecords": [
        {
            "description": "2FA Usage Record",
            "count": 41,
            "successful": 12,
            "unsuccessful": 29,
            "unit": "2FA",
            "uri": "/2fa/usage/records?endDate=2020-07-23&amp;startDate=2019-07-01"
        }
    ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>HTTP POST example</p>
</div>
      <div class="sample-code-bar">
        <button class="sample-code-button scsIndex-79 is-active" onclick="openLanguage('Curl', 79)">Curl</button>
        <button class="sample-code-button scsIndex-79" onclick="openLanguage('Nodejs', 79)">Nodejs</button>
        <button class="sample-code-button scsIndex-79" onclick="openLanguage('Python', 79)">Python</button>
        <button class="sample-code-button scsIndex-79" onclick="openLanguage('Java', 79)">Java</button>
      </div>
      <div id="Curl-79" class="sample-language-79">
        <pre class="highlightjs highlight"><code class="language-console hljs samplecode-container" data-lang="console">curl -X POST https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records \
   -H 'Cache-Control: no-cache' \
   -H 'Content-Type: application/json' \
   -d 'startTime2019-08-05T06:37:00' \
   -d 'endTime=2019-08-30' \
   -u 'YourAccountSid:YourAuthToken'
</code></pre>
      </div>
      <div id="Nodejs-79" class="sample-language-79" style="display:none">
        <pre class="highlightjs highlight"><code class="language-javascript hljs samplecode-container" data-lang="javascript">const request = require('request');

// Provide your Account Sid and Auth Token from your Console Account page
const ACCOUNT_SID = 'my_ACCOUNT_SID';
const AUTH_TOKEN = 'my_AUTH_TOKEN';

request.({
      method: 'POST',
      url: 'https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records',
      auth: { 'user': ACCOUNT_SID, 'pass': AUTH_TOKEN },
      headers: {
          'Cache-Control': 'no-cache',
          'Content-Type': 'application/json'
      },
      form: {
         'startTime2019-08-05T06:37:00': 'undefined',
         'endTime': '2019-08-30'
      }
   },
   function (error, response, body) {
      // Add your business logic below; status can be found at 'response.statusCode' and response body at 'body'
      ...
});
</code></pre>
      </div>
      <div id="Python-79" class="sample-language-79" style="display:none">
        <pre class="highlightjs highlight"><code class="language-python hljs samplecode-container" data-lang="python">from http.client import HTTPSConnection
from base64 import b64encode
from urllib.parse import urlencode

# Provide your Account Sid and Auth Token from your Console Account page
ACCOUNT_SID = 'my_ACCOUNT_SID'
AUTH_TOKEN = 'my_AUTH_TOKEN'

userAndPass = b64encode(bytes(ACCOUNT_SID + ':' + AUTH_TOKEN, 'utf-8')).decode("ascii")
headers = { 'Authorization' : 'Basic %s' %  userAndPass,
    'Cache-Control': 'no-cache',
    'Content-Type': 'application/json',
    'Content-type': 'application/x-www-form-urlencoded',
    'Accept': 'text/plain' }

# Update POST parameters accordingly
params = urlencode({
   'startTime2019-08-05T06:37:00': 'undefined',
   'endTime': '2019-08-30'
})

conn = HTTPSConnection('mycompany.restcomm.com')
conn.request("POST", '/restcomm/2012-04-24/2fa/usage/records',
      params, headers=headers)
res = conn.getresponse()

# Add your business logic below; status can be found at 'res.status', reason at 'res.reason' and response body can be retrieved with res.read()
...
</code></pre>
      </div>
      <div id="Java-79" class="sample-language-79" style="display:none">
        <pre class="highlightjs highlight"><code class="language-java hljs samplecode-container" data-lang="java">import java.net.URL;
import javax.net.ssl.HttpsURLConnection;
import java.io.*;
import java.util.Base64;

public class JavaSampleClass {
   // Provide your Account Sid and Auth Token from your Console Account page
   public static final String ACCOUNT_SID = "my_ACCOUNT_SID";
   public static final String AUTH_TOKEN = "my_AUTH_TOKEN";


   public static void main(String[] args) throws Exception {
      String userAndPass = ACCOUNT_SID + ':' + AUTH_TOKEN;
      String encoded = Base64.getEncoder().encodeToString(userAndPass.getBytes());

      URL url = new URL(("https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records");
      HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();
      conn.setRequestProperty("Authorization", "Basic " + encoded);
      conn.setRequestProperty("Cache-Control", "no-cache");
      conn.setRequestProperty("Content-Type", "application/json");
      conn.setRequestMethod("POST");
      conn.setDoOutput(true);
      DataOutputStream os = new DataOutputStream(conn.getOutputStream());

      // Update POST parameters accordingly
      os.writeBytes("startTime2019-08-05T06:37:00&" +
        "endTime=2019-08-30");
      os.close();

      // Add your business logic below; response code can be obtained from 'conn.getResponseCode()' and input stream from 'conn.getInputStream()'
      ...
  }
}
</code></pre>
      </div>
<div class="paragraph">
<p>Example Response</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "usageRecords": [
        {
            "description": "2FA Usage record",
            "count": 67,
            "successful": 17,
            "unsuccessful": 50,
            "unit": "2FA",
            "uri": "/2fa/usage/records"
        }
    ]
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_request_subresource"><a class="anchor" href="#_request_subresource"></a>Request Subresource</h3>
<div class="paragraph">
<p>The main Usage Records list resource supports a variety of subresources.</p>
</div>
<div class="paragraph">
<p>/2fa/usage/records/{Subresource}<br></p>
</div>
<div class="paragraph">
<p>Supported subresources are:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Subresource</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Daily</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage Record on a daily basis. If no date filter is passed, the usage for the last 30 days is retrieved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return monthly Usage Record. If no date filter is passed, the usage for the last 12 months is retrieved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yearly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return yearly Usage Record. If no date filter is passed, only this year and previous year usage is retrieved.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Today</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage Record for today.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yesterday</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage Record for yesterday.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ThisMonth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage Record for this month.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LastMonth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return Usage Record for the last month.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Filters mentioned in the above section can also be passed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples"><a class="anchor" href="#_examples"></a>Examples</h3>
<div class="paragraph">
<p>HTTP GET Example</p>
</div>
      <div class="sample-code-bar">
        <button class="sample-code-button scsIndex-80 is-active" onclick="openLanguage('Curl', 80)">Curl</button>
        <button class="sample-code-button scsIndex-80" onclick="openLanguage('Nodejs', 80)">Nodejs</button>
        <button class="sample-code-button scsIndex-80" onclick="openLanguage('Python', 80)">Python</button>
        <button class="sample-code-button scsIndex-80" onclick="openLanguage('Java', 80)">Java</button>
      </div>
      <div id="Curl-80" class="sample-language-80">
        <pre class="highlightjs highlight"><code class="language-console hljs samplecode-container" data-lang="console">curl -X GET https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records/daily.json  \
   -u 'YourAccountSid:YourAuthToken'
</code></pre>
      </div>
      <div id="Nodejs-80" class="sample-language-80" style="display:none">
        <pre class="highlightjs highlight"><code class="language-javascript hljs samplecode-container" data-lang="javascript">const request = require('request');

// Provide your Account Sid and Auth Token from your Console Account page
const ACCOUNT_SID = 'my_ACCOUNT_SID';
const AUTH_TOKEN = 'my_AUTH_TOKEN';

request({
      method: 'GET',
      url: 'https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records/daily.json',
      auth: { 'user': ACCOUNT_SID, 'pass': AUTH_TOKEN }
   },
   function (error, response, body) {
      // Add your business logic below; status can be found at 'response.statusCode' and response body at 'body'
      ...
   }
);
</code></pre>
      </div>
      <div id="Python-80" class="sample-language-80" style="display:none">
        <pre class="highlightjs highlight"><code class="language-python hljs samplecode-container" data-lang="python">from http.client import HTTPSConnection
from base64 import b64encode

# Provide your Account Sid and Auth Token from your Console Account page
ACCOUNT_SID = 'my_ACCOUNT_SID'
AUTH_TOKEN = 'my_AUTH_TOKEN'

userAndPass = b64encode(bytes(ACCOUNT_SID + ':' + AUTH_TOKEN, 'utf-8')).decode("ascii")
headers = { 'Authorization' : 'Basic %s' %  userAndPass }

conn = HTTPSConnection('mycompany.restcomm.com')
conn.request("GET", '/restcomm/2012-04-24/2fa/usage/records/daily.json',
      headers=headers)
res = conn.getresponse()

# Add your business logic below; status can be found at 'res.status', reason at 'res.reason' and response body can be retrieved with res.read()
...
</code></pre>
      </div>
      <div id="Java-80" class="sample-language-80" style="display:none">
        <pre class="highlightjs highlight"><code class="language-java hljs samplecode-container" data-lang="java">import java.net.URL;
import javax.net.ssl.HttpsURLConnection;
import java.io.*;
import java.util.Base64;

public class JavaSampleClass {
   // Provide your Account Sid and Auth Token from your Console Account page
   public static final String ACCOUNT_SID = "my_ACCOUNT_SID";
   public static final String AUTH_TOKEN = "my_AUTH_TOKEN";


   public static void main(String[] args) throws Exception {
      String userAndPass = ACCOUNT_SID + ':' + AUTH_TOKEN;
      String encoded = Base64.getEncoder().encodeToString(userAndPass.getBytes());

      URL url = new URL("https://mycompany.restcomm.com/restcomm/2012-04-24/2fa/usage/records/daily.json");
      HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();
      conn.setRequestProperty("Authorization", "Basic " + encoded);
      conn.setRequestMethod("GET");

      // Add your business logic below; response code can be obtained from 'conn.getResponseCode()' and input stream from 'conn.getInputStream()'
      ...
  }
}
</code></pre>
      </div>
<div class="paragraph">
<p>Example Response</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "usageRecords": [
        {
            "description": "2FA Usage record",
            "startTime": "2021-02-01",
            "endTime": "2021-02-01",
            "count": 4,
            "successful": 0,
            "unsuccessful": 4,
            "unit": "2FA"
        }
    ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>You can also test your service using <a href="https://www.getpostman.com/">Postman</a> or any other similar client.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limit"><a class="anchor" href="#_limit"></a>Limit</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../../../enterprise/pages/tutorials/Smart-2FA.html#_limit">Limits</a> provides the capability to enforce limitations on the number of OTPs sent based on various keys defined.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_common_response_error_codes"><a class="anchor" href="#_common_response_error_codes"></a>Common Response Error Codes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Common response error codes can be found <a href="../../../enterprise/pages/tutorials/Smart-2FA.html#_common_response_error_code">here</a></p>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column-container">
      <div class="footer-column">
          <h5 class="footer-column-title">Contact Us</h5>
          <p>+1 (650) 263 6146</p>
          <p><a href="https://go.telestax.com/sales-inquiries">SALES</a></p>
          <p><a href="https://go.telestax.com/support-inquiries">SUPPORT</a></p>
          <p><a href="https://go.telestax.com/general-inquiries">GENERAL</a></p>
          <h5 class="footer-column-title">Follow Us</h5>
          <p>
            <span><a href="https://twitter.com/restcomm"><i class="fab fa-twitter"></i></a></span>
            <span><a href="https://www.linkedin.com/company/telestax"><i class="fab fa-linkedin-in"></i></a></span>
            <span><a href="https://www.facebook.com/Telestax/"><i class="fab fa-facebook-f"></i></a></span>
            <span><a href="https://www.youtube.com/channel/UCrZ-J48d3AdwGdL01XuZKZQ"><i class="fab fa-youtube"></i></a></span>
          </p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Turnkey Applications</h5>
        <p><a class="footer-usecase-item" href="/docs/1.0/turnkey-applications/smart-2fa-overview.html">SMART 2FA</a></p>
          <p><a class="footer-usecase-item" href="/docs/1.0/solutions/message-exchange-overview.html">MESSAGE EXCHANGE</a></p>
          <p><a class="footer-usecase-item" href="/docs/1.0/solutions/cisco-webex-overview.html">CISCO WEBEX</a></p>
          <p><a class="footer-usecase-item" href="/docs/1.0/api/call-queue-api.html">CALL QUEUE</a></p>
      </div>
      <div class="footer-column">
        <h5 class="footer-column-title">Learn</h5>
        <p><a href="https://www.telestax.com/blog/">BLOG</a></p>

          <p><a id="terms-link" href="/docs/support.html">TERMS AND CONDITIONS</a></p>
      </div>
      <div class="footer-column">
    <h5 class="footer-column-title">Additional Links</h5>
        <p><a class="sps-text sps-link" data-parm-text="company_name" data-parm-link="company_link" href="https://www.telestax.com/about/" data-default-text="About Us" data-default-link="#">ABOUT</a></p>
       <p><a href="https://www.telestax.com/faqs/">FAQ'S</a></p>
       <p><a href="https://www.telestax.com/privacy-statement/">PRIVACY POLICY</a></p>
       <p><a href="https://www.telestax.com/contact/">CONTACT</a></p>
      </div>
    </div>
    <!---->
    <!--<div class="footer-bottom-container">-->
      <!--<div class="footer-logo">-->
        <!--<a class="footer-logo-link" href="https://telestax.com"></a>-->
      <!--</div>-->
      <!--<div class="footer-copyright">-->
        <!--<p class="footer-copyright-paragraph">COPYRIGHT © 2020, TELESTAX INC., ALL RIGHTS RESERVED.</p>-->
      <!--</div>-->
    <!--</div>-->
    <!---->
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<!--
<script>hljs.initHighlighting()</script>
-->
<!--
  Tried to get this chunk into js/05-countly.js but it has some issues with the async loading so fell back to putting it here
  where it works for some reason
-->
  <!-- Only enable countly if the key is set -->
  <script type='text/javascript' src='https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'></script>
  <script>
    var Countly = Countly || {}
    Countly.q = Countly.q || []

    // provide countly initialization parameters
    Countly.app_key = '078fe985e67633be9b5569e0de287850d9194ca7'
    Countly.url = 'https://restcomm.count.ly'

    Countly.q.push(['track_sessions'])
    Countly.q.push(['track_pageview'])
    Countly.q.push(['track_clicks'])
    Countly.q.push(['track_errors'])
    Countly.q.push(['track_links'])
    Countly.q.push(['track_forms'])
    Countly.q.push(['collect_from_forms'])

    // send event
    Countly.q.push(['add_event', {
      key: 'Restcomm CSPs Documentation',
      segmentation: {},
    }]);

    // load countly script asynchronously
    (function () {
      var cly = document.createElement('script')
      cly.type = 'text/javascript'
      cly.async = true
      // enter url of script here
      cly.src = 'https://cdn.jsdelivr.net/countly-sdk-web/latest/countly.min.js'
      cly.onload = function () {
        Countly.init()
      }
      var s = document.getElementsByTagName('script')[0]
      s.parentNode.insertBefore(cly, s)
    })()
  </script>
<!-- UserBack Tool -->
<script>
    Userback = window.Userback || {};
    Userback.access_token = '5061|10149|r9Ure7pw7zJFVyflkflhPEQJvrsbdWcpYS5Vz3safDjZZg7ukX';
    (function(id) {
        var s = document.createElement('script');
        s.async = 1;s.src = 'https://static.userback.io/widget/v1.js';
        var parent_node = document.head || document.body;parent_node.appendChild(s);
    })('userback-sdk');
</script>

  </body>
</html>
